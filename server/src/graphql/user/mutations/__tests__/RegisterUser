/* const EasyGraphQLTester = require("easygraphql-tester");
import { graphql } from "graphql";
import { MongoClient } from "mongodb";
import { schema } from "../../../schema";
const fs = require("fs");
const path = require("path");

//const userSchema = fs.readFileSync(path.join(__dirname, 'schema', 'user.gql'), 'utf8')

const tester = new EasyGraphQLTester(schema);

describe("insert", () => {
  let connection;
  let db;

  beforeAll(async () => {
    connection = await await MongoClient.connect(global.__MONGO_URI__);
    db = await connection.db();
  });

  afterAll(async () => {
    await connection.close();
  });

  it("should create a user", async () => {
    const users = db.collection("JestUsers");

    const mutation = `
      mutation RegisterUserMutation($name: String!, $email: String!, $password: String!) {
        RegisterUserMutation(input: {name: $name, email: $email, password: $password}) {
          token
          me {
            name
            email
          }
        }
      }
    `;

    const mockUser = {
      name: "Test",
      email: "test@test.com",
      password: "123456",
    };

    const result = await graphql({
      schema: schema,
      source: mutation,
      variableValues: { ...mockUser },
    });
    console.log(result);

    expect(result.data.me).toBeDefined();
  });
}); */

/* import { graphql } from "graphql";

import {
  connectWithMongoose,
  disconnectWithMongoose
} from "../../../../../test";
import { schema } from "../../../schema";

beforeAll(connectWithMongoose);
afterAll(disconnectWithMongoose);

it("should create a new user", async () => {
  const mutation = `
      mutation RegisterUserMutation($name: String!, $email: String!, $password: String!) {
        RegisterUserMutation(input: {name: $name, email: $email, password: $password}) {
          token
          me {
            id
            name
            email
          }
        }
      }
    `;

  const rootValue = {};

  const variableValues = {
    name: "test",
    email: "test@test.com",
    password: "123456",
  };

  const result = await graphql({
    schema,
    source: mutation,
    rootValue,
    variableValues,
  });

  console.log(result)
  expect(result.errors).toBeUndefined();

  const { me, token } = result?.data?.registerUserMutation as any;

  expect(token).toBeDefined();
  expect(me.id).toBeDefined();
}); */

/* import { graphql } from "graphql";
import { createMovie } from "src/graphql/movie/mutations/CreateMovie";

import {
  clearDbAndRestartCounters,
  connectMongoose,
  disconnectMongoose,
  sanitizeTestObject,
} from "../../../../../test";
import { getContext } from "../../../../getContext";
import { schema } from "../../../schema";
import { createUser } from "../../fixture/createUser";

beforeAll(connectMongoose);

beforeEach(clearDbAndRestartCounters);

afterAll(disconnectMongoose);

it("should all posts", async () => {
  const user = await createUser();

  await createMovie();

  // language=GraphQL
  const query = `
    query Q {
      movies {
        edges {
          node {
            title
          }
        }
      }
    }
  `;

  const rootValue = {};
  const contextValue = await getContext({ user });
  const variableValues = {};

  const result = await graphql({
    schema,
    source: query,
    rootValue,
    contextValue,
    variableValues,
  });
  console.log(result);
  expect(result.errors).toBeUndefined();
  // eslint-disable-next-line
  console.log("result: ", result.data.posts);
  expect(result.data.movies.edges.length).toBe(2);
  expect(sanitizeTestObject(result.data)).toMatchSnapshot();
}); */
